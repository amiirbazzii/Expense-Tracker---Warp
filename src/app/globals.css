@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: Arial, Helvetica, sans-serif;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* Hide scrollbars for horizontal scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
    scroll-behavior: smooth;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
  
  .scrollbar-hide::-webkit-scrollbar-track {
    display: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar-thumb {
    display: none;
  }

  /* Persian/Farsi text support */
  .font-persian {
    font-family: var(--font-iran-sans), Tahoma, Arial, sans-serif;
  }

  .font-english {
    font-family: var(--font-poppins), ui-sans-serif, system-ui, sans-serif;
  }

  /* Auto-detect Persian characters and apply Persian font */
  /* Persian Unicode ranges: Arabic, Arabic Supplement, Arabic Extended-A */
  :not(input):not(textarea):not(select) {
    /* Apply Persian font if text contains Persian/Arabic characters */
    font-family: var(--font-poppins), ui-sans-serif, system-ui, sans-serif;
  }

  /* Persian text detection using CSS */
  *:lang(fa),
  *[dir="rtl"],
  .persian-text {
    font-family: var(--font-iran-sans), Tahoma, Arial, sans-serif !important;
    /* Remove RTL behavior - keep everything LTR for now */
    direction: ltr;
    text-align: left;
  }

  /* Force Persian font for any element containing Persian characters */
  .force-persian {
    font-family: var(--font-iran-sans), Tahoma, Arial, sans-serif !important;
    /* Keep LTR direction and left alignment */
    direction: ltr !important;
  }

  /* Keep numbers and English words LTR within Persian text */
  .force-persian .english-inline {
    direction: ltr !important;
    display: inline-block;
    text-align: left !important;
  }

  /* English content in Persian context */
  [lang="fa"] .english-text, [dir="rtl"] .english-text {
    font-family: var(--font-poppins), ui-sans-serif, system-ui, sans-serif;
    direction: ltr;
    text-align: left;
    display: inline-block;
  }

  /* Persian content in English context */
  [lang="en"] .persian-text, [dir="ltr"] .persian-text {
    font-family: var(--font-iran-sans), Tahoma, Arial, sans-serif;
    direction: ltr;
    text-align: left;
    display: inline-block;
  }

  /* Document-level font application */
  html.font-persian {
    font-family: var(--font-iran-sans), Tahoma, Arial, sans-serif;
  }

  html.font-english {
    font-family: var(--font-poppins), ui-sans-serif, system-ui, sans-serif;
  }

  /* Override for Persian text everywhere */
  html {
    /* Default to English font */
    font-family: var(--font-poppins), ui-sans-serif, system-ui, sans-serif;
  }

  /* Apply Persian font to any text containing Persian characters */
  html :is(
    h1, h2, h3, h4, h5, h6,
    p, span, div, label,
    button, a, li, td, th
  ):not(input):not(textarea):not(select) {
    /* This will be handled by JavaScript font detection */
  }

  /* Persian number support */
  .persian-numbers {
    font-feature-settings: "locl";
    font-variant-numeric: lining-nums;
  }

  /* Mixed content containers */
  .mixed-content {
    unicode-bidi: plaintext;
  }
}

/* Mobile App Animations */
@keyframes slide-up {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes bounce-in {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.4s ease-out;
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

.animate-bounce-in {
  animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Mobile-friendly touch targets */
@media (hover: none) and (pointer: coarse) {
  button, a, input, select, textarea {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Prevent text selection on buttons */
button {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Smooth scrolling for mobile */
html {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
}

/* PWA display mode detection */
@media (display-mode: standalone) {
  body {
    /* App is installed */
    --is-pwa: 1;
  }
}

/* Disable pull-to-refresh on mobile */
body {
  overscroll-behavior-y: contain;
}
